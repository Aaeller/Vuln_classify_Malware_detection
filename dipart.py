import tensorflow as tf
tf_records_filenames = 'train80_gist_eight_train.tfrecords'
raw_dataset = tf.data.TFRecordDataset(tf_records_filenames)

shards = 100

for i in range(shards):
    writer = tf.data.experimental.TFRecordWriter(f"output_file-part-{i}.tfrecord")
    writer.write(raw_dataset.shard(shards, i))