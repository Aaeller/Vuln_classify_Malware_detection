#0.导入包和模块
from PyQt5.Qt import *
from PyQt5 import QtCore
from PyQt5.QtGui import *
from PyQt5.QtWidgets import *
import time
from first_function_check import Ui_Form
from Run import *
from login_panel import Login_window

class MySplashScreen(QSplashScreen):
    # 鼠标点击事件
    def mousePressEvent(self, event):
        pass

class First_test(QWidget, Ui_Form):


    def __init__(self, parent=None, *args  , **kwargs):
        super().__init__(parent, *args  , **kwargs)
        self.setupUi(self)

    def load_data(self, sp):
        for i in range(1, 11):  # 模拟主程序加载过程
            time.sleep(0.1)  # 加载数据
            sp.showMessage("加载... {0}%".format(i * 10), QtCore.Qt.AlignHCenter | QtCore.Qt.AlignBottom, QtCore.Qt.black)
            QtWidgets.qApp.processEvents() # 允许主进程处理事件

    def run_manware_classify(self):
        main_show.show()

    def login_ui_check(self):
        login_pl.show()





if __name__ == '__main__':
    import sys
    #1.创建应用程序对象
    app = QApplication(sys.argv)

    main_show = Ui_Main()
    login_pl = Login_window()
    splash = MySplashScreen()
    splash.setPixmap(QPixmap('D:/毕设/开发/icons/哈工程.png'))  # 设置背景图片
    # 设置字体
    splash.setFont(QFont('微软雅黑', 10))
    # 显示启动界面
    splash.show()
    app.processEvents()  # 处理主进程事件

    #2.控件操作
    #2.1 创建控件
    window = First_test()
    window.load_data(splash)  # 加载数据
    #2.2 设置控件

    #2.3 展示控件
    window.show()
    splash.finish(window)
    splash.deleteLater()
    login_pl.login_account_pwd_signal.connect(lambda a, p:print(a, p))
    #3 应用程序执行，消息循环
    sys.exit(app.exec())